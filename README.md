# 서점 사이트 구축

이 프로젝트는 Next.js와 TypeScript를 사용하여 로그인 및 회원가입 기능을 구현한 프로젝트입니다.
원래는 Next.js의 API 라우트를 활용하여 백엔드 서버가 없는 환경에서 로그인 기능을 구현하려 했으나,
배포 단계에서 Next.js API 라우트가 500 에러를 발생시 시켜, Firebase로 백엔드를 추가하였습니다.
Firebase를 통해 사용자 인증 기능을 구현하였으며, 사용자는 로그인 페이지에서 아이디와 비밀번호를 입력하여 로그인하고,
회원가입 페이지에서 새로운 계정을 생성할 수 있습니다.

DEMO : <https://main.d382aieutdh889.amplifyapp.com/>

## 구성

- 프론트엔드 1명

## 주요 기술 스택

- Next.js
- TypeScript
- Zustand
- Axios & Fetch
- js-cookie & jsonwebtoken
- Sass
- typewriter-effect
- AWS amplify

## 주요 기능

### 로그인 기능

로그인 기능은 프론트엔드와 백엔드 두 부분으로 구성되어 있습니다.

- 프론트엔드 (파일: LoginPage.tsx)
  사용자는 이메일(ID)와 비밀번호를 입력하여 로그인할 수 있습니다. 입력된 ID와 비밀번호는 /api/login 엔드포인트로 POST 요청을 보냅니다.
  응답으로 받은 JWT 토큰은 쿠키에 저장되고, 유효성 검사를 통과하면 사용자는 랜딩 페이지로 리디렉션됩니다.
  ID는 로컬 스토리지에 저장되어, 다음 방문 때 자동으로 입력 필드를 채웁니다.

- 백엔드 로직 (파일: api/login.ts)
  POST 요청을 받으면, 요청 본문에서 ID와 비밀번호를 추출하여 Firebase로 전달합니다.
  일치하는 사용자를 찾으면, 해당 사용자의 ID를 포함하는 JWT 토큰을 생성하고 응답으로 보냅니다. 토큰은 1시간 후에 만료됩니다.
  일치하는 사용자를 찾지 못하면, 404 상태 코드와 함께 에러 메시지를 반환합니다.

### 회원 가입 기능

회원 가입 기능은 프론트엔드와 백엔드 두 부분으로 구성되어 있습니다.

- 프론트엔드 (파일: SignUpPage.tsx)
  사용자는 ID(이메일)와 비밀번호를 입력하여 회원 가입을 요청할 수 있습니다. 입력된 ID와 비밀번호는 /api/signup 엔드포인트로 POST 요청을 보냅니다.

- 백엔드 로직 (파일: api/signup.ts):
  POST 요청을 받으면, 요청 본문에서 ID와 비밀번호를 추출하고 Firebase로 전달합니다.
  추출한 ID와 비밀번호를 기존 데이터베이스(users.json)와 비교하여 동일한 ID가 존재하는지 확인합니다.
  만약 동일한 ID가 없다면, 새로운 사용자 정보(ID와 비밀번호)를 데이터베이스에 추가하고, "success signup" 메시지와 함께 200 상태 코드를 응답으로 보냅니다.
  동일한 ID가 있다면, "That User Already Exists" 메시지와 함께 500 상태 코드를 반환합니다.

### 약관 동의 기능

파일: Agreement.tsx
이 기능은 사용자가 서비스의 약관에 동의할 수 있도록 합니다. 초기에 '/api/policy' 엔드포인트에서 약관 데이터를 가져와 표시하며, 각각의 약관은 별도의 체크박스로 제공됩니다. 사용자는 각 약관에 개별적으로 동의하거나, "약관 전체 동의하기" 버튼을 이용해 모든 약관에 일괄 동의할 수 있습니다. 필수 약관이나 모든 약관에 동의한 후에는 "확인하기" 버튼이 활성화되어 약관 동의 절차를 완료할 수 있습니다.

### 타이핑 효과

typewriter-effect 라이브러리로 구현하였습니다.

## 개발 실행 방법

1. 패키지 설치: `npm install`
2. Firebase 설정: Firebase에서 새 프로젝트를 생성하고, 생성한 프로젝트의 설정 정보를 `.env.local` 파일에 추가합니다. (예: `NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key`)
3. 개발 서버 실행: `npm run dev`

### 주의 사항

이 프로젝트는 개발 및 테스트 환경에서 사용하기 위한 목적으로 제작되었습니다.
사용자가 가입한 회원 정보는 Firebase Auth를 통해 관리됩니다.
